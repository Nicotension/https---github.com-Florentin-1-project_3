{% extends 'base.html.twig' %}

{% block title %}Product Catalog
{% endblock %}

{% block body %}

	<h1>
		Product index
	</h1>


	<table class="table">
		<thead>
			<tr>
				<th>Id</th>
				<th>Name</th>
				<th>Price</th>
				<th>Availability</th>
				<th>Picture</th>
				<th>Category</th>
				<th>Description</th>
				<th>actions</th>
			</tr>
		</thead>
		<tbody>
			{% for product in products %}
				<tr>
					<td>{{ product.id }}</td>
					<td>{{ product.name }}</td>
					<td>{{ product.price }}</td>
					<td>{{ product.availability }}</td>
					<td><img src="{{ product.picture }}"></td>
					<td>
						{{ product.category }}</td>
					<td>{{ product.description }}</td>
					<td>
						{% if is_granted('ROLE_ADMIN')%}
							<a href="{{ path('app_product_show', {'id': product.id}) }}">show</a>
							<a href="{{ path('app_product_edit', {'id': product.id}) }}">edit</a>
						{% endif %}

						{% if is_granted('ROLE_USER')%}

							<a href="{{ path('app_orders', {'id': product.id}) }}">Add to Cart</a>
							<a href="{{ path('app_reviews', {'id': product.id}) }}">Add a review</a>

							<a href="{{ path('app_questions', {'id': product.id}) }}">Ask a question</a>

						{% endif %}

					</td>
				</tr>
			</td>
		</tbody>
	</tr>

{% else %}
	<tr>
		<td colspan="8">no records found</td>
	</tr>
{% endfor %}</tbody></table>{% if is_granted('ROLE_ADMIN')%}<a href="{{ path('app_product_new') }}">Create new</a>{% endif %}{% endblock %}
