{% extends 'base.html.twig' %}

{% block title %}Product Catalog
{% endblock %}


{% block body %}
<style>

.index_card {
  height: 100%;
  display: flex;
  flex-direction: column;
}

  .button-container {
    display: flex;
  }

  .button-container a {
    flex: 1 1 auto; 
    margin-right: 5px; 
  }

  .button-container a:last-child {
    margin-right: 0; 
  }

 </style>
    <h1>Product Catalog</h1>

    {% if is_granted('ROLE_ADMIN') %}
        <a href="{{ path('app_product_new') }}">Create new</a>
    {% endif %}
	
	
	<div class="container text-center">
    	<div class="row row-cols-1 row-cols-md-3 row-cols-lg-4  ">
        	{% for product in products %}
            	<div class="col mb-3">
                	<div class="card  index_card" style="width: 100%;">
                    	<img src="{{ asset('uploads/' ~ product.picture) }}" alt="{{ product.name }}" class="card-img-top" width="150">
                    	<div class="card-body">
							<h5 class="card-title">{{ product.name }}</h5>
							<p class="card-text"> Price: {{ product.price }} </p>
							<p class="card-text"> Availability: {{ product.availability }} </p>
							<p class="card-text"> Category: {{ product.category }} </p>
							<p class="card-text"> {{ product.description }} </p>
							<div class="button-container">
								{% if is_granted('ROLE_ADMIN') %}
									<a href="{{ path('app_product_show', {'id': product.id}) }}" class="btn btn-primary">Show</a>
									<a href="{{ path('app_product_edit', {'id': product.id}) }}" class="btn btn-primary">Edit</a> Â  

								{% endif %}
								{% if is_granted('ROLE_USER') %}
									<a href="{{ path('app_orders', {'id': product.id}) }}" class="btn btn-primary">Add to Cart</a>
									<a href="{{ path('app_questions', {'id': product.id}) }}" class="btn btn-primary">Ask us a question</a>
									<a href="{{ path('app_reviews', {'id': product.id}) }}" class="btn btn-primary">Write a review</a>
								{% endif %}
                        	</div>

                    	</div>
                	</div>
            	</div>
        {% endfor %}
    </div>
</div>

{% endblock %}
